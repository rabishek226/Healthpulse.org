<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Health Survey | Community Health Hub</title>
    <meta name="description" content="Complete our health survey to help improve community health services and outcomes." />
    <meta name="author" content="Health Pulse Community Initiative" />
    <link rel="stylesheet" href="styles.css">
    <!-- IMPORTANT: DO NOT REMOVE THIS SCRIPT TAG OR THIS VERY COMMENT! -->
    <script src="https://cdn.gpteng.co/gptengineer.js" type="module"></script>
  </head>
  <body>
    <header>
      <nav>
        <div class="container">
          <div class="logo">
            <h1>HealthPulse</h1>
          </div>
          <ul class="nav-links">
            <li><a href="index.html">Home</a></li>
            <li><a href="survey.html" class="active">Survey</a></li>
            <li><a href="dashboard.html">Dashboard</a></li>
            <li><a href="survey.html" class="btn">Take Survey</a></li>
          </ul>
          <div class="mobile-menu">
            <span></span>
            <span></span>
            <span></span>
          </div>
        </div>
      </nav>
    </header>
    
    <div class="mobile-nav">
      <ul>
        <li><a href="index.html">Home</a></li>
        <li><a href="survey.html">Survey</a></li>
        <li><a href="dashboard.html">Dashboard</a></li>
        <li><a href="survey.html" class="btn">Take Survey</a></li>
      </ul>
    </div>

    <section class="survey-intro">
      <div class="container">
        <h1>Community Health Survey</h1>
        <p>Your responses will help us understand community health needs and improve services.</p>
        <div class="survey-info">
          <p>Time to complete: ~10 minutes | All responses are confidential</p>
        </div>
      </div>
    </section>

    <section class="survey-form">
      <div class="container">
        <form id="health-survey">
          <!-- Demographics Section -->
          <div class="form-section">
            <h2>Demographics <span>(Optional)</span></h2>
            <p class="section-note">This information helps us understand health needs across different groups in our community.</p>
            
            <div class="form-group">
              <label for="age-group">Age Group</label>
              <select id="age-group" name="age-group">
                <option value="">Select an option</option>
                <option value="18-24">18-24</option>
                <option value="25-34">25-34</option>
                <option value="35-44">35-44</option>
                <option value="45-54">45-54</option>
                <option value="55-64">55-64</option>
                <option value="65+">65+</option>
                <option value="prefer-not-to-say">Prefer not to say</option>
              </select>
            </div>
            
            <div class="form-group">
              <label for="gender">Gender</label>
              <select id="gender" name="gender">
                <option value="">Select an option</option>
                <option value="male">Male</option>
                <option value="female">Female</option>
                <option value="non-binary">Non-binary</option>
                <option value="other">Other</option>
                <option value="prefer-not-to-say">Prefer not to say</option>
              </select>
            </div>
            
            <div class="form-group">
              <label for="zip-code">Zip Code</label>
              <input type="text" id="zip-code" name="zip-code" placeholder="e.g., 12345">
            </div>
          </div>
          
          <!-- Health Status Section -->
          <div class="form-section">
            <h2>General Health</h2>
            
            <div class="form-group">
              <label>How would you rate your overall health?</label>
              <div class="radio-group">
                <div class="radio-item">
                  <input type="radio" id="health-excellent" name="overall-health" value="excellent">
                  <label for="health-excellent">Excellent</label>
                </div>
                <div class="radio-item">
                  <input type="radio" id="health-very-good" name="overall-health" value="very-good">
                  <label for="health-very-good">Very Good</label>
                </div>
                <div class="radio-item">
                  <input type="radio" id="health-good" name="overall-health" value="good">
                  <label for="health-good">Good</label>
                </div>
                <div class="radio-item">
                  <input type="radio" id="health-fair" name="overall-health" value="fair">
                  <label for="health-fair">Fair</label>
                </div>
                <div class="radio-item">
                  <input type="radio" id="health-poor" name="overall-health" value="poor">
                  <label for="health-poor">Poor</label>
                </div>
              </div>
            </div>
            
            <div class="form-group">
              <label>Do you have any ongoing health conditions? (Check all that apply)</label>
              <div class="checkbox-group">
                <div class="checkbox-item">
                  <input type="checkbox" id="condition-hypertension" name="conditions" value="hypertension">
                  <label for="condition-hypertension">Hypertension (High Blood Pressure)</label>
                </div>
                <div class="checkbox-item">
                  <input type="checkbox" id="condition-diabetes" name="conditions" value="diabetes">
                  <label for="condition-diabetes">Diabetes</label>
                </div>
                <div class="checkbox-item">
                  <input type="checkbox" id="condition-heart" name="conditions" value="heart-disease">
                  <label for="condition-heart">Heart Disease</label>
                </div>
                <div class="checkbox-item">
                  <input type="checkbox" id="condition-respiratory" name="conditions" value="respiratory">
                  <label for="condition-respiratory">Respiratory Conditions (Asthma, COPD, etc.)</label>
                </div>
                <div class="checkbox-item">
                  <input type="checkbox" id="condition-mental-health" name="conditions" value="mental-health">
                  <label for="condition-mental-health">Mental Health Conditions</label>
                </div>
                <div class="checkbox-item">
                  <input type="checkbox" id="condition-none" name="conditions" value="none">
                  <label for="condition-none">None</label>
                </div>
                <div class="checkbox-item">
                  <input type="checkbox" id="condition-other" name="conditions" value="other">
                  <label for="condition-other">Other</label>
                </div>
              </div>
            </div>
          </div>
          
          <!-- Healthcare Access Section -->
          <div class="form-section">
            <h2>Healthcare Access</h2>
            
            <div class="form-group">
              <label>Do you currently have health insurance?</label>
              <div class="radio-group">
                <div class="radio-item">
                  <input type="radio" id="insurance-yes" name="has-insurance" value="yes">
                  <label for="insurance-yes">Yes</label>
                </div>
                <div class="radio-item">
                  <input type="radio" id="insurance-no" name="has-insurance" value="no">
                  <label for="insurance-no">No</label>
                </div>
                <div class="radio-item">
                  <input type="radio" id="insurance-not-sure" name="has-insurance" value="not-sure">
                  <label for="insurance-not-sure">Not Sure</label>
                </div>
              </div>
            </div>
            
            <div class="form-group">
              <label>When was your last visit to a healthcare provider?</label>
              <select id="last-visit" name="last-visit">
                <option value="">Select an option</option>
                <option value="within-6-months">Within the last 6 months</option>
                <option value="6-12-months">6-12 months ago</option>
                <option value="1-2-years">1-2 years ago</option>
                <option value="2-5-years">2-5 years ago</option>
                <option value="5-plus-years">More than 5 years ago</option>
                <option value="never">Never</option>
              </select>
            </div>
            
            <div class="form-group">
              <label>How difficult is it for you to access healthcare when needed?</label>
              <div class="radio-group">
                <div class="radio-item">
                  <input type="radio" id="access-very-easy" name="healthcare-access" value="very-easy">
                  <label for="access-very-easy">Very Easy</label>
                </div>
                <div class="radio-item">
                  <input type="radio" id="access-easy" name="healthcare-access" value="easy">
                  <label for="access-easy">Easy</label>
                </div>
                <div class="radio-item">
                  <input type="radio" id="access-neutral" name="healthcare-access" value="neutral">
                  <label for="access-neutral">Neither Easy nor Difficult</label>
                </div>
                <div class="radio-item">
                  <input type="radio" id="access-difficult" name="healthcare-access" value="difficult">
                  <label for="access-difficult">Difficult</label>
                </div>
                <div class="radio-item">
                  <input type="radio" id="access-very-difficult" name="healthcare-access" value="very-difficult">
                  <label for="access-very-difficult">Very Difficult</label>
                </div>
              </div>
            </div>
          </div>
          
          <!-- Community Health Section -->
          <div class="form-section">
            <h2>Community Health Priorities</h2>
            
            <div class="form-group">
              <label>Which health issues do you believe are most important in our community? (Select up to 3)</label>
              <div class="checkbox-group">
                <div class="checkbox-item">
                  <input type="checkbox" id="priority-mental-health" name="health-priorities" value="mental-health">
                  <label for="priority-mental-health">Mental Health Services</label>
                </div>
                <div class="checkbox-item">
                  <input type="checkbox" id="priority-substance-abuse" name="health-priorities" value="substance-abuse">
                  <label for="priority-substance-abuse">Substance Abuse Treatment</label>
                </div>
                <div class="checkbox-item">
                  <input type="checkbox" id="priority-chronic-disease" name="health-priorities" value="chronic-disease">
                  <label for="priority-chronic-disease">Chronic Disease Management</label>
                </div>
                <div class="checkbox-item">
                  <input type="checkbox" id="priority-nutrition" name="health-priorities" value="nutrition">
                  <label for="priority-nutrition">Nutrition & Healthy Food Access</label>
                </div>
                <div class="checkbox-item">
                  <input type="checkbox" id="priority-physical-activity" name="health-priorities" value="physical-activity">
                  <label for="priority-physical-activity">Physical Activity & Recreation</label>
                </div>
                <div class="checkbox-item">
                  <input type="checkbox" id="priority-preventive-care" name="health-priorities" value="preventive-care">
                  <label for="priority-preventive-care">Preventive Care & Screenings</label>
                </div>
                <div class="checkbox-item">
                  <input type="checkbox" id="priority-maternal-child" name="health-priorities" value="maternal-child">
                  <label for="priority-maternal-child">Maternal & Child Health</label>
                </div>
                <div class="checkbox-item">
                  <input type="checkbox" id="priority-senior" name="health-priorities" value="senior">
                  <label for="priority-senior">Senior Health Services</label>
                </div>
              </div>
            </div>
            
            <div class="form-group">
              <label for="suggestions">Do you have any suggestions for improving health services in our community?</label>
              <textarea id="suggestions" name="suggestions" rows="4" placeholder="Share your ideas here..."></textarea>
            </div>
          </div>
          
          <!-- Consent Section -->
          <div class="form-section consent-section">
            <h2>Consent</h2>
            <p class="section-note">Please review and confirm your consent to submit this data.</p>
            
            <div class="form-group">
              <div class="checkbox-item consent-checkbox">
                <input type="checkbox" id="consent" name="consent" required>
                <label for="consent">I understand that my responses will be used to inform community health initiatives. All data will be aggregated and my individual responses will remain confidential.</label>
              </div>
            </div>
          </div>
          
          <div class="form-actions">
            <button type="submit" class="btn btn-primary btn-large">Submit Survey</button>
          </div>
        </form>
      </div>
    </section>

    <footer>
      <div class="container">
        <div class="footer-content">
          <div class="footer-section">
            <h3>About HealthPulse</h3>
            <p>Improving community health outcomes through data-driven insights and collective action.</p>
          </div>
          <div class="footer-section">
            <h3>Navigation</h3>
            <ul>
              <li><a href="index.html">Home</a></li>
              <li><a href="survey.html">Survey</a></li>
              <li><a href="dashboard.html">Dashboard</a></li>
            </ul>
          </div>
          <div class="footer-section">
            <h3>Legal</h3>
            <ul>
              <li><a href="#">Privacy Policy</a></li>
              <li><a href="#">Terms of Service</a></li>
              <li><a href="#">Data Usage</a></li>
            </ul>
          </div>
          <div class="footer-section">
            <h3>Contact</h3>
            <p>Email: contact@healthpulse.org</p>
            <p>Phone: (555) 123-4567</p>
          </div>
        </div>
        <div class="footer-bottom">
          <p>&copy; <span id="current-year"></span> HealthPulse. All rights reserved.</p>
        </div>
      </div>
    </footer>

    <script>
      document.addEventListener('DOMContentLoaded', function() {
        // Mobile menu toggle
        const mobileMenuButton = document.querySelector('.mobile-menu');
        const mobileNav = document.querySelector('.mobile-nav');
        
        mobileMenuButton.addEventListener('click', function() {
          mobileMenuButton.classList.toggle('active');
          mobileNav.classList.toggle('active');
        });
        
        // Set current year in footer
        document.getElementById('current-year').textContent = new Date().getFullYear();
        
        // Survey form submission
        const surveyForm = document.getElementById('health-survey');
        
        surveyForm.addEventListener('submit', function(event) {
          event.preventDefault();
          
          // Get form data
          const formData = new FormData(surveyForm);
          const surveyData = {};
          
          // Convert FormData to object
          for (let [key, value] of formData.entries()) {
            // Handle checkboxes (multiple values)
            if (key === 'conditions' || key === 'health-priorities') {
              if (!surveyData[key]) {
                surveyData[key] = [];
              }
              surveyData[key].push(value);
            } else {
              surveyData[key] = value;
            }
          }
          
          // Get existing survey data from localStorage or initialize empty array
          const existingSurveys = JSON.parse(localStorage.getItem('healthSurveys') || '[]');
          
          // Add timestamp
          surveyData.timestamp = new Date().toISOString();
          
          // Add new survey to the array
          existingSurveys.push(surveyData);
          
          // Save back to localStorage
          localStorage.setItem('healthSurveys', JSON.stringify(existingSurveys));
          
          // Show success message
          alert('Thank you for completing the survey! Your responses have been recorded.');
          
          // Reset form
          surveyForm.reset();
          
          // Redirect to dashboard
          window.location.href = 'dashboard.html';
        });
        
        // Ensure "None" checkbox logic for conditions
        const noneConditionCheckbox = document.getElementById('condition-none');
        const otherConditionCheckboxes = document.querySelectorAll('input[name="conditions"]:not(#condition-none)');
        
        noneConditionCheckbox.addEventListener('change', function() {
          if (this.checked) {
            otherConditionCheckboxes.forEach(checkbox => {
              checkbox.checked = false;
              checkbox.disabled = true;
            });
          } else {
            otherConditionCheckboxes.forEach(checkbox => {
              checkbox.disabled = false;
            });
          }
        });
        
        otherConditionCheckboxes.forEach(checkbox => {
          checkbox.addEventListener('change', function() {
            let anyOtherChecked = false;
            
            otherConditionCheckboxes.forEach(cb => {
              if (cb.checked) anyOtherChecked = true;
            });
            
            if (anyOtherChecked && noneConditionCheckbox.checked) {
              noneConditionCheckbox.checked = false;
            }
          });
        });
        
        // Limit health priorities selection to 3
        const healthPriorityCheckboxes = document.querySelectorAll('input[name="health-priorities"]');
        
        healthPriorityCheckboxes.forEach(checkbox => {
          checkbox.addEventListener('change', function() {
            const checkedPriorities = document.querySelectorAll('input[name="health-priorities"]:checked');
            
            if (checkedPriorities.length > 3) {
              this.checked = false;
              alert('Please select at most 3 health priorities.');
            }
          });
        });
      });
    </script>
  </body>
</html>
